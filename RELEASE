==============================================
Release notes for current version of Sofia-SIP
==============================================

Changes since last release
--------------------------

<changes since last written in freshmeat.net "Changes:" style;
 and in less than 10 lines />

Bugs in blaa and foo have been fixed. The stack now supports
use of foobar...

API/ABI changes and versioning
------------------------------

<see previous release notes at
 http://sofia-sip.sourceforge.net/relnotes/ for examples ;
 - should include all changes to public headers, and 
   other important information to developers; 
 - and should be updated _continuously_! />

general:
- The Sofia-SIP m4 macros are no longer installed to /usr/share/aclocal/.

libsofia-sip-ua:
- Added soa tag SOATAG_AUDIO_AUX()
- Added nua tags NUTAG_M_DISPLAY(), NUTAG_M_USERNAME(), NUTAG_M_PARAMS(), and
  NUTAG_M_FEATURES().
- Added nua tag NUTAG_EARLY_ANSWER. Optionally include SDP answer already
  in a 1XX response.
- Added nua tag NUTAG_REFER_WITH_ID.
- Added network change detection logic. This extends current su API
  with two functions defined in su_os_nw.h and nta API with
  nta_agent_close_tports(). Also a new nua event nua_i_network_changed and
  tag NUTAG_DETECT_NETWORK_UPDATES are introduced.
- Added nta_leg_make_replaces() and nta_leg_by_replaces() functions
- Added su_isblocking(errcode) 
- Added urltag_scan()
- template: Added foobar() function (sofia-sip/foobar.h).
- Done some 64-bit cleanup. Added typedefs isize_t, usize_t and issize_t. By
  default isize_t is int, usize_t is unsigned and issize_t is int and there
  is no change in API. If ./configure option --disable-size-compat is given,
  API uses size_t or ssize_t instead of int/unsigned int.
  - Changed argument and return type of inline function t_xtra() to size_t.
  - Using socklen_t as li_addrlen.
- The install location of awk scripts (msg_parser.awk and 
  tag_dll.awk) from libexec to share/sofia-sip/. Also added 
  a new pkg-config variable to find out the awk scripts: 
  sh> pkg-config --variable=sofiaawkdir sofia-sip-ua
- Removed deprecated function msg_addrlen(), deprecated types
  msg_ref_t, msg_obj_t and msg_hdr_t.
- This release is ABI/API compatible with applications 
  linked against 1.12.0. The ABI has been tested with the nua
  module unit test (test_nua) built against original 1.12.0 release.

libsofia-sip-ua-glib:
- Added sofia-sip/su_glib.h. The old sofia-sip/su_source.h is 
  deprecated, but still present. Similarly the functions su_root_source()
  and su_root_source_create() have been deprecated and replaced with
  su_glib_root_create() and su_glib_root_gsource().
- Added nua_glib::cancel-answered signal - emitted when the stack
  receives an answer to previously sent CANCEL.
- This release is ABI/API compatible with libsofia-sip-ua-glib of 1.12.0. Note, 
  libsofia-sip-ua-glib interface is NOT considered stable and may change in 
  a future 1.12.x release.

Contributors to this release
----------------------------

<list of people who contributed to _this_ releaseFC 
 - update as people's patches are added, or when you commit stuff
 - current development team members (see AUTHORS) may be omitted
 - name of the contributor should be enough (email addresses in AUTHORS),
   plus a brief description of what was contributed
 - roughly sorted by number of patches accepted
/> 

- template: First Surname (patch to nua/soa/msg)
- Andrzej Ciarkowski (fix to su_task_execute() race).
- Michael Jerris (patches adding MSVC2005 build support, 64-bit patches)
- Mika Saari (patch to stun module)

See the AUTHORS file in the distribution package.

Notes on new features
---------------------

<information about major new features
 - new/changed/removed functionality
 - links to further documentation
 - section may be omitted for minor releases
/> 

- nua event watcher (nua_subscribe, nua_watcher) now tries to re-establish
  subscription if the subscription was terminated with reason "deactivated" or
  "probation". Likewise, if SUBSCRIBE was returned a suitable error response
  with Retry-After header, nua tries to re-establish subscription after
  given interval.

Bugs fixed in this release
--------------------------

< notable bugs fixed in this release
 - check the sf.net bug tracker; see closed bugs,
   sorted by closing date
 - other bugs as fixed in CVS/darcs
/>

- "explicit" and "required" parameters are ignored with Reject-Contact header,
  "q" parameter with both Reject-Contact and Accept-Contact
- PRACK is now handled like any other request, it can be challenged and nua
  authenticates it
- span_lws() now returns length of real linear whitespace as defined in RFC 3261
- Updated codecs in incoming offer were ignored. Thanks for Denis Legostayev
  for reporting the bug and sending a patch.
- UPDATE was rejected by nua if received during initial call setup. Thanks for
  Rajeev K for reporting the bug.
- NOTIFY Event: refer without id is not rejected anymore. Thanks for 
  emilie for reporting this.   
- t_scan() now returns negative value when tag does not implement scan method
- #1485968 doxygen docs for libsofia-sip-ua-glib are broken
- Session timer handling by nua UAS now honors missing "timer" feature tag.
