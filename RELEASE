==============================================
Release notes for current version of Sofia-SIP
==============================================

Changes since last release
--------------------------

<changes since last written in freshmeat.net "Changes:" style;
 and in less than 10 lines />

Severe bug in STUN functionality was fixed.

API/ABI changes and versioning
------------------------------

<see previous release notes at
 http://sofia-sip.sourceforge.net/relnotes/ for examples ;
 - should include all changes to public headers, and 
   other important information to developers; 
 - and should be updated _continuously_! />

**template**: New features in API are marked with Doxytag macro @VERSION_1_XX_X.

libsofia-sip-ua:
- **template**: Added foobar() function (sofia-sip/foobar.h).
- Added nua_method() and NUTAG_METHOD()
- Added nth_request_auth() and NTHTAG_AUTH_MODULE()
- Added functions msg_header_find_item(), msg_header_replace_item(),
  msg_header_remove_item()
  (handling Allow and Allow-Events headers)
- Added function msg_parse_next_field() for parsing headers with
   multiple fields
- Added functions for handling SIP headers encoded in SIP URL:
  sip_headers_as_url_query(), sip_url_query_as_taglist(),
  url_query_as_header_string(), url_unescape_to(),
  msg_header_parse_str()
- Added su_home_destructor(), deprecated su_home_desctructor(). See
  documentation of su_home_desctructor() for more information.
- Added NUTAG_INCLUDE_EXTRA_SDP()
- Added nua_handle_by_replaces(), nua_handle_make_replaces(),
  nua_handle_magic() and nua_magic() functions
- Added Refer-Sub header 
- Added nua_i_register event for incoming REGISTER requests (nua.h)
- Added NUTAG_WITH(), nutag_with, NUTAG_WITH_CURRENT(),
  nua_current_request(), NUTAG_WITH_SAVED(), nua_saved_event_request()
  (nua_tag.h, nua.h)
- Added tport_is_closed() and tport_is_shutdown() to the public API.
- This release is ABI/API compatible with applications linked against
  any 1.12.x release. However, applications built against this release won't 
  work against an older library. The ABI has been tested with the nua module 
  unit test (test_nua) built against original 1.12.0 release.

libsofia-sip-ua-glib:
- ABI changed. This was caused by adding a new signal (enum)
NGSIG_INCOMING_SUBSCRIBE for local presence support. Note,
libsofia-sip-ua-glib interface is still not considered stable and may
change in future 1.12.x releases.

Contributors to this release
----------------------------

- Michael Jerris contributed nua_i_register code along with number of 
  platform-specific fixes 

<list of people who contributed to _this_ release
 - update as people's patches are added, or when you commit stuff
 - current development team members (see AUTHORS) may be omitted
 - name of the contributor should be enough (email addresses in AUTHORS),
   plus a brief description of what was contributed
 - roughly sorted by number of patches accepted
/> 

- **template**: First Surname (patch to nua/soa/msg)

See the AUTHORS file in the distribution package.

Notes on new features
---------------------

Query part in SIP URIs is now handled by nta and nua. The SIP URI can
contain a query part separated with the "?", which specifies SIP headers
that are included in the request constructed from the URI. For example,
using URI <sip:example.com?subject=test> would include Subject header
with value "test" in the request.

There is now also reactive mode of handing subscriptions in nua, using
nua_i_subscribe()/nua_respond()/nua_notify()/nua_i_publish().

The nua can be used as a registrar with nua_i_register/nua_respond().

<information about major new features
 - new/changed/removed functionality
 - links to further documentation
 - section may be omitted for minor releases
/> 

Bugs fixed in this release
--------------------------

< notable bugs fixed in this release
 - check the sf.net bug tracker; see closed bugs,
   sorted by closing date
 - other bugs as fixed in CVS/darcs
/>

- Subsite handling in nth was fixed.
- Outbound was confused by IPv6 addresses in the Via header.
  Thanks for Marc Blanchet from Viagenie for reporting the bug.
- Session timers in nua did not work if UAS had to do refreshing with INVITEs
  Thanks for Chung Pak Lai for reporting this bug.
- sres_query() failed assert or crashed if there was no DNS servers configured.
  Thanks for Roman Filonenko for reporting this bug.
- nua_bye() did not terminate the call if re-INVITE going on at the same time.
  Thanks for Anthony Minessale for reporting this bug.
- sdp_connection_cmp() now considers the address, too.
- SOA now updates c= line if it is changed in user SDP.
  Thanks for Anthony Minessale for reporting this bug.
- NUA call model does not require SDP answer before 200 OK anymore.
  Thanks for Anthony Minessale for reporting this.
- Fixed crash when CANCEL was received but PRACK was expected
- #1574342: stunc tool broken in 1.12.3
- With NUTAG_EARLY_ANSWER(), include answer in 200 OK, too.
- Fixed tl_find_last().
- Fixed bug parsing malformed Refer-To or Referred-By headers. Thanks for
  Anthony Minessale for reporting this.

